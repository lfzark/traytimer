# TrayTimer - 极简跨平台托盘计时器

**一个单文件、极简、零打扰的系统托盘计时器**  
支持 **Windows / Linux**，专注不打扰。

- 正计时  
- 倒计时（支持 `秒数`、`m:s`、`HH:MM:SS` 结束时间）  
- 事件命名 + 自动日志记录  
- 倒计时结束 → 显示 **超时时长**（`-0:00:05`）  
- 托盘图标闪烁 + 通知（3秒自动隐藏）  
- 无需打包即可运行

---

## 预览
<img width="266" height="92" alt="image" src="https://github.com/user-attachments/assets/235818f8-160e-4c51-9342-b044ad33fc35" />


```
[托盘图标] → 右键 → 正计时 / 倒计时 → 输入事件名 → 开始
```


- **双击托盘**：弹出菜单  
- **倒计时结束**：图标闪烁 + 系统通知  
- **日志自动保存**：每次开始/结束都记录

---

## 功能一览

| 功能 | 说明 |
|------|------|
| **正计时** | 右键 → 正计时 → 输入事件名 → 开始 |
| **倒计时** | 支持 `60`、`1:30`、`15:10:10`、`10:10` |
| **结束时间模式** | 输入 `15:10:10` → 自动倒计时到该时间点 |
| **跨天处理** | 若早于当前时间 → 自动算明天 |
| **超时时长** | 结束 → 显示 `-0:00:05`，继续计时 |
| **事件名称** | 每次开始前输入，记录到日志 |
| **日志文件** | `~/.config/timer.log`（Linux）或 `%APPDATA%\timer.log`（Windows） |
| **托盘闪烁** | 倒计时结束 → 图标交替闪烁 |
| **通知** | 3秒自动隐藏 |
| **停止** | 右键 → 停止 → 记录结束时间 |
| **退出** | 右键 → 退出 |

---

## 日志示例 (`timer.log`)

```log
[2025-11-17 14:20:15] 正计时开始: 工作
[2025-11-17 14:45:30] 正计时结束: 工作 | 用时: 00:25:15

[2025-11-17 14:50:00] 倒计时开始 (目标时间): 喝咖啡
[2025-11-17 14:50:00] 目标时间: 14:55:00
[2025-11-17 14:55:05] 倒计时结束: 喝咖啡 | 用时: 00:05:05
```

---

## 安装与运行

### 1. 安装依赖

```bash
pip install pyqt5
```

### 2. 保存代码

将完整代码保存为 `timer.py`

### 3. 运行

```bash
python timer.py
```

> 右下角出现托盘图标 → 右键使用

---

## Windows 特别说明

### 图标问题（`QSystemTrayIcon::setVisible: No Icon set`）

**必须提供有效图标**，否则报错。

#### 推荐做法（任选其一）：

**方法 A：放 `timer.ico` 文件（推荐）**

1. 下载一个 `.ico` 图标（如 [这里](https://www.iconarchive.com/show/simple-icons-by-paomedia/Clock-icon.html)）
2. 改名为 `timer.ico`
3. 与 `timer.py` 放同目录

**方法 B：使用系统图标（无需文件）**

代码已内置兜底：
```python
QIcon.fromTheme("appointment-new")  # Windows 可用
```

---


## 输入格式详解

| 输入 | 含义 |
|------|------|
| `90` | 90 秒 |
| `1:30` | 1分30秒 |
| `15:10:10` | 今天 15:10:10 |
| `10:10` | 今天 10:10（若已过 → 明天） |
| `0:05` | 5 秒 |

---

## 文件结构

```
timer.py          ← 主程序
timer.ico         ← 图标（可选，推荐）
~/.config/timer.log    ← Linux 日志
%APPDATA%\timer.log    ← Windows 日志
```
<img width="544" height="223" alt="image" src="https://github.com/user-attachments/assets/c38d3f42-dbfd-4a93-9a04-1442397c19f3" />

---

## 开发 & 贡献

- 语言：Python 3 + PyQt5
- 代码行数：< 200 行
- 依赖：仅 `PyQt5`
- 欢迎 PR！



> **一个计时器，极简到极致，专注不打扰。**
```
